{% extends 'ta_app/base.html' %}
{% block content %}

{% include 'students/util/_sidebar.html' %}

<div id="content" class="container-fluid">

	{% include 'ta_app/_return_messages.html' with data=messages %}

	<h3>Offered Jobs</h3>

	<h5>Summary</h5>
	<table class="table">
	  <thead>
	    <tr>
	      <th>Year-Term</th>
	      <th>Total Assigned Hours</th>
	    </tr>
	  </thead>
	  <tbody>
	    {% for year_term, assigned_hours in offered_summary.items %}
	      <tr>
	        <td>{{ year_term }}</td>
	        <td>{{ assigned_hours }} hours</td>
	      </tr>
	    {% empty %}
	      <tr>
	        <td colspan="2">No summary available</td>
	      </tr>
	    {% endfor %}
	  </tbody>
	</table>

	<h5>List</h5>
	<table class="table">
	  <thead>
	    <tr>
	      <th>Year</th>
	      <th>Term</th>
	      <th>Job</th>
	      <th>Assigned Status</th>
	      <th>Assigned Hours</th>
				<th>Offered at</th>
	      <th>Your Decision</th>
	      <th>Actions</th>
	    </tr>
	  </thead>
	  <tbody>
	    {% for job in offered_jobs %}
		    <tr>
		      <td>{{ job.year }}</td>
		      <td>{{ job.term }}</td>
		      <td>
		        <a href="{% url 'show_job' session_slug=job.session_slug job_slug=job.job_slug path='offered' portal='Student' %}">
		          {{ job.course_code }} {{ job.course_number }} {{ job.course_section }}
		        </a>
		      </td>
		      <td>
						<span class="badge badge-warning">{{ job.assigned_status }}</span>
					</td>
		      <td>{{ job.assigned_hours }} hours</td>
					<td>{{ job.assigned_created_at }}</td>
		      <td>
		        {% if job.accepted %}
							<span class="badge badge-success">{{ job.accepted.get_assigned_display }}</span>
		        {% elif job.declined %}
							<span class="badge badge-danger">{{ job.declined.get_assigned_display }}</span>
		        {% else %}
							<span class="badge badge-secondary">None</span>
		        {% endif %}
		      </td>
		      <td>
		        <a href="{% url 'students:offered_job' session_slug=job.session_slug job_slug=job.job_slug %}">Accept / Decline</a>
		      </td>
		    </tr>
	    {% empty %}
	      <tr>
	        <td colspan="3">No offered jobs found</td>
	      </tr>
	    {% endfor %}
	  </tbody>
	</table>

</div>

{% endblock %}
