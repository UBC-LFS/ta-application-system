{% extends 'ta_app/base.html' %}
{% block content %}

<nav class="margin-top-10" aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a href="{% url 'administrators:index' %}">administrators</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Course Codes</li>
  </ol>
</nav>


{% if messages %}
	{% for message in messages %}
		<div class="alert alert-info">{{ message }}</div>
	{% endfor %}
{% endif %}

<h1>Course Codes</h1>

<table class="table">
  <thead>
    <tr>
      <th class="w-75">Code</th>
      <th class="w-25">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for code in course_codes %}
      <tr>
        <td>
          <h2><a href="{% url 'administrators:show_course_code' code.name %}">{{ code.name }}</a></h2>
        </td>
        <td>
          <button class="btn btn-warning btn-block" type="button" data-toggle="modal" data-target="#course-code-edit-modal-{{ code.id }}">
            Edit
          </button>

          <form action="{% url 'administrators:delete_course_code' %}" method="post" onsubmit="return confirm('Are you sure to delete this course code - {{ code.name }} ?')">
            {% csrf_token %}
            <input type="hidden" name="course_code" value="{{ code.id }}" />
            <input class="btn btn-danger btn-block margin-top-10" type="submit" value="Delete">
          </form>
        </td>
      </tr>

      <div class="modal fade" id="course-code-edit-modal-{{ code.id }}" tabindex="-1" role="dialog" aria-labelledby="course-code-edit-modal-label-{{ code.id }}" aria-hidden="true">
			  <div class="modal-dialog modal-lg" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="course-code-edit-modal-label-{{ code.id }}">Course Codes: Edit</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">&times;</span>
			        </button>
			      </div>
			      <div class="modal-body">
							<form action="{% url 'administrators:edit_course_code' code.name %}" method="post">
								{% csrf_token %}
                <input type="text" name="name" value="{{ code.name }}" />
								<input type="submit" value="Update"/>
							</form>
			      </div>
			    </div>
			  </div>
			</div>
    {% empty %}
      <tr>
        <td colspan="2">No course codes found.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<hr />

<h3>Create a Course Code</h3>
<form action="{% url 'administrators:course_codes' %}" method="post">
  {% csrf_token %}
  <table>{{ form.as_table }}</table>
  <input type="submit" value="Create" />
</form>


{% endblock %}
