{% extends 'ta_app/base.html' %}
{% block content %}

<div class="wrapper">
  {% include "administrators/_sidebar.html" %}

  <div id="content" class="container-fluid">

    <h3>Student Jobs</h3>

    <div>ID: {{ student.id }}</div>
    <div>First Name: {{ student.first_name }}</div>
    <div>Last Name: {{ student.last_name }}</div>
    <div>Preferred Name: {{ student.profile.preferred_name }}</div>
    <div>CWL: {{ student.username }}</div>
    <div>E-mail: {{ student.email }}</div>

    <h5>Jobs</h5>
    <table class="table table-responsive">
      <thead>
        <tr>
          <th>ID</th>
          <th>Year</th>
          <th>Term</th>
          <th>Job</th>
          <th>Supervisor Approval</th>
          <th>How Qualified</th>
          <th>How Interested</th>
          <th>Availability</th>
          <th>Availability Note</th>
          <th>Classification</th>
          <th>Note</th>
          <th>Instructor Preference</th>
          <th>Assigned TA Hours</th>
          <th>Applicant TA Hours</th>
          <th>Status</th>
          <th>Created at</th>
          <th>Updated at</th>
        </tr>
      </thead>
      <tbody>
        {% for app in student.application_set.all %}
          <tr>
            <td>{{ app.id }}</td>
            <td>{{ app.job.session.year }}</td>
            <td>{{ app.job.session.term.code }}</td>
            <td>{{ app.job.course.code.name }} {{ app.job.course.number.name }} {{ app.job.course.section.name }}</td>
            <td>{{ app.supervisor_approval }}</td>
            <td>{{ app.get_how_qualified_display }}</td>
            <td>{{ app.get_how_interested_display }}</td>
            <td>{{ app.availability }}</td>
            <td>{{ app.availability_note }}</td>
            <td>{{ app.get_classification_display }}</td>
            <td>{{ app.note }}</td>
            <td>{{ app.get_instructor_preference_display }}</td>
            <td>{{ app.job.assigned_ta_hours }} hours</td>
            <td>{{ app.job.ta_hours }} hours</td>
            <td>
              <ul>
                {% for st in app.status.all %}
                  <li>{{ st.get_assigned_display }}: {{ st.assigned_hours }} hours at {{ st.created_at }}</li>
                {% empty %}
                  <li>No status found</li>
                {% endfor %}
              </ul>
            </td>
            <td>{{ app.created_at }}</td>
            <td>{{ app.updated_at }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="6">No jobs found</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

  </div>
</div>

{% endblock %}
