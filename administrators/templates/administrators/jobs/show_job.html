{% extends 'ta_app/base.html' %}
{% block content %}
{% include "ta_app/sidebars/_administrator_sidebar.html" %}

<div id="content" class="container-fluid">
  {% include 'ta_app/pages/_header.html' with title='Job Details' %}
  {% include 'administrators/jobs/_go_back.html' with data=path %}

  <div class="mb-4"></div>
  {% include 'ta_app/jobs/_job_details.html' with data=job %}

  <div class="text-center bg-info text-white mb-5 p-3 d-inline-block">
    <div>
      <h5 class="font-weight-normal">
        <i class="fa fa-star-o" aria-hidden="true"></i> Assigned TA Hours
        <i class="fa fa-star-o" aria-hidden="true"></i>
      </h5>
      <h3 class="font-weight-bold">{{ job.assigned_ta_hours }} hours</h3>
    </div>
    <hr />
    <div>
      <h5 class="font-weight-normal">
        <i class="fa fa-star-o" aria-hidden="true"></i> Accumulated TA hours
        <i class="fa fa-star-o" aria-hidden="true"></i>
      </h5>
      <h3 class="font-weight-bold">{{ job.ta_hours }} hours</h3>
    </div>
  </div>

  <ul class="mt-3">
    <li>Job ID: {{ job.id }}</li>
    <li>Job Slug: {{ job.course.slug }}</li>
  </ul>

  <h4 class="text-info mt-5 mb-3">
    Applications
    <small class="text-muted">Total: {{ job.application_set.all|length }}</small>
  </h4>

  <div class="d-inline-block">
    <table class="table table-sm table-bordered table-hover table-striped table-responsive-md text-center">
      <thead>
        <tr>
          <th>Application ID</th>
          <th>Applicant</th>
          <th>CWL</th>
          <th>Application</th>
          <th>Status</th>
          <th>Instructor Preference</th>
          <th>Classification</th>
          <th>Note</th>
          <th>Created at</th>
          <th>Updated at</th>
        </tr>
      </thead>
      <tbody>
        {% for app in job.application_set.all %}
          <tr>
            <td>{{ app.id }}</td>
            <td>{{ app.applicant.first_name }} {{ app.applicant.last_name }}</td>
            <td>{{ app.applicant.username }}</td>
            <td>{% include 'ta_app/applications/_modal_app_details.html' with data=app %}</td>
            <td>{% include 'ta_app/applications/_modal_app_status.html' with data=app %}</td>
            <td>{{ app.get_instructor_preference_display }}</td>
            <td>{{ app.classification.year }} {{ app.classification.name }}</td>
            <td>{{ app.note }}</td>
            <td>{{ app.created_at }}</td>
            <td>{{ app.updated_at }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="7">No applications found.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
