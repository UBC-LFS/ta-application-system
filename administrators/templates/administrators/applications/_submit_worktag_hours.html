<button class="btn btn-xs btn-{% if data.worktaghours %}secondary{% else %}success{% endif %} d-block mx-auto" type="button" data-toggle="modal" data-target="#worktag-modal-{{ data.id }}">
  Worktag
</button>
<div class="modal fade" id="worktag-modal-{{ data.id }}" tabindex="-1" role="dialog" aria-labelledby="worktag-label-{{ data.id }}" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-info" id="worktag-modal-label-{{ data.id }}">Worktag Setting</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body text-left font-size-1">
        <div class="modal-item">
          <h6 class="text-secondary">{{ data.job.session.year }} {{ data.job.session.term.code }} - {{ data.job.course.code.name }} {{ data.job.course.number.name }} {{ data.job.course.section.name }}</h6>
          <h4>
            {{ data.applicant.get_full_name }}
            <small class="text-dark-gray">(CWL: {{ data.applicant.username }})</small>
          </h4>

          <div class="border bg-light-gray font-size-sm pt-2 px-3 pb-0">
            <p class="mb-0">
              When students accept their offer, a <code>Worktag</code> value will automatically be saved in their Admin Documents.
              If an application has two different <code>Worktags</code>, please enter two hour values to calculate their percentages and store them automatically.<br />
              For example,
            </p>
            <ul class="font-size-sm">
              <li>FNH = 84 hours, 84 / 112 * 100 = 75%</li>
              <li>MND = 28 hours, 28 / 112 * 100 = 25%</li>
            </ul>
          </div>

          <p class="font-weight-bold">
            Current Worktag:
            {% if data.admindocuments.worktag %}
              <span class="text-chocolate">{{ data.admindocuments.worktag }}</span>
            {% else %}
              <span class="badge badge-secondary">NONE</span>
            {% endif %}
          </p>

          <form action="{{ submit_url }}" method="post">
            {% csrf_token %}

            <table class="white-modal-table table">
              <tr>
                <td>
                  <label for="id_program1_{{ data.id }}">Program 1:</label>
                  <div class="help">This field is required.</div>
                  <select id="id_program1_{{ data.id }}" name="program1" class="form-control">
                    {% for worktag in worktags %}
                      <option value="{{ worktag.name }}-{{ worktag.code }}" {% if data.programs.one == worktag.name %}selected{% endif %}>{{ worktag.name }} ({{ worktag.code }})</option>
                    {% endfor %}
                  </select>
                </td>
                <td>
                  <label for="id_program1_hours_{{ data.id }}">Program 1 Hours:</label>
                  <div class="help">This field is required. Only numerical value allowed.</div>
                  <input id="id_program1_hours_{{ data.id }}" type="number" step="1" name="program1_hours" value="{{ data.worktaghours.program_hours.program1_hours }}" class="form-control" />
                </td>
              </tr>
              <tr>
                <td>
                  <label for="id_program2_{{ data.id }}">Program 2:</label>
                  <div class="help">This field is required.</div>
                  <select id="id_program2_{{ data.id }}" name="program2" class="form-control">
                    {% for worktag in worktags %}
                      <option value="{{ worktag.name }}-{{ worktag.code }}" {% if data.programs.two == worktag.name %}selected{% endif %}>{{ worktag.name }} ({{ worktag.code }})</option>
                    {% endfor %}
                  </select>
                </td>
                <td>
                  <label for="id_program2_hours_{{ data.id }}">Program 2 Hours:</label>
                  <div class="help">This field is required. Only numerical value allowed.</div>
                  <input id="id_program2_hours_{{ data.id }}" type="number" step="1" name="program2_hours" value="{{ data.worktaghours.program_hours.program2_hours }}" class="form-control" />
                </td>
              </tr>
              <tr>
                <td></td>
                <td>
                  <label class="text-danger" for="id_total_hours_{{ data.id }}">Total Hours:</label>
                  <div class="help">This field is required. Only numerical value allowed.</div>
                  <input id="id_total_hours_{{ data.id }}" type="number" step="1" name="total_hours" value="{{ data.worktaghours.program_hours.total_hours }}" class="form-control" />
                </td>
              </tr>
            </table>

            <div class="field-wrapper">
              <label for="id_processing_note_{{ data.id }}">Admin Documents - Processing Note:</label>
              <div class="help">This field is optional. Only administrators can see this processing note in the Accepted Applications.</div>
              <textarea id="id_processing_note_{{ data.id }}" name="processing_note" class="summernote">{{ data.admindocuments.processing_note|default_if_none:"" }}</textarea>
            </div>

            <input type="hidden" name="application" value="{{ data.id }}" />
            <input type="hidden" name="next" value="{{ new_next }}" />

            <input class="btn btn-{% if data.worktaghours %}secondary{% else %}success{% endif %} font-size-1" type="submit" value="{% if data.worktaghours %}Save Changes{% else %}Conform Save{% endif %}" />
          </form>

        </div>
      </div>
    </div>
  </div>
</div>
